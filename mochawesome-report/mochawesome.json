{
  "stats": {
    "suites": 1,
    "tests": 2,
    "passes": 1,
    "pending": 0,
    "failures": 1,
    "start": "2025-12-06T19:05:36.578Z",
    "end": "2025-12-06T19:06:21.364Z",
    "duration": 44786,
    "testsRegistered": 2,
    "passPercent": 50,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "4e4f9a0e-50dc-4b2b-ab69-cf68cff001dd",
      "title": "",
      "fullFile": "cypress\\e2e\\admin-students.cy.js",
      "file": "cypress\\e2e\\admin-students.cy.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "70b47049-0ac9-4087-ae26-72221b37fb30",
          "title": "Import Excel Étudiant",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "L'utilisateur peut importer un fichier Excel",
              "fullTitle": "Import Excel Étudiant L'utilisateur peut importer un fichier Excel",
              "timedOut": null,
              "duration": 15278,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Intercepter la requête API d'import\ncy.intercept(\"POST\", \"**/api/students/upload\", {\n  statusCode: 200,\n  body: {\n    message: \"Students imported successfully\"\n  }\n}).as(\"importStudents\");\n// Se connecter en tant qu'admin AVANT toute navigation\ncy.forceLogin();\n// Naviguer vers la page de gestion des étudiants\ncy.visit(\"/managestudents\");\n// Attendre que la page soit chargée\ncy.contains(/students/i).should(\"be.visible\");\n// Cliquer sur le bouton + pour ouvrir le formulaire d'import\n// Le bouton est dans le même conteneur que \"List of Students\"\ncy.contains(\"List of Students\").parent().find(\"button[class*='bg-gray-400']\").should(\"be.visible\").click();\n// Attendre que le formulaire d'import soit visible\ncy.contains(\"Excel Import of Students\").should(\"be.visible\");\n// S'assurer qu'aucune modal n'est ouverte avant de commencer\ncy.get(\"body\").then($body => {\n  const modalExists = $body.find(\".swal2-popup\").length > 0;\n  if (modalExists) {\n    cy.get(\".swal2-confirm, .swal2-cancel, .swal2-close\").first().click({\n      force: true\n    });\n    cy.wait(500);\n  }\n});\n// Sélectionner le fichier Excel\ncy.get(\"input[type='file']\").should(\"be.visible\").selectFile(\"cypress/fixtures/students_import.xlsx\", {\n  force: true\n});\n// Attendre que le fichier soit traité\ncy.wait(1500); // Donner le temps au FileReader de traiter le fichier\n// Vérifier et fermer toute modal d'erreur qui pourrait être apparue\ncy.get(\"body\").then($body => {\n  const errorModal = $body.find(\".swal2-popup.swal2-icon-error\");\n  if (errorModal.length > 0) {\n    // Fermer la modal d'erreur et continuer\n    cy.get(\".swal2-confirm, .swal2-cancel, .swal2-close\").first().click({\n      force: true\n    });\n    cy.wait(500);\n    // Si une erreur est survenue, on ne peut pas continuer\n    cy.log(\"Une erreur est survenue lors de la lecture du fichier\");\n    return;\n  }\n});\n// Le tableau peut ne pas être visible si le fichier est vide ou invalide\n// On vérifie simplement que le bouton Import est disponible\ncy.contains(\"button\", \"Import Excel\").should(\"be.visible\");\n// Cliquer sur le bouton Import Excel (forcer le clic si nécessaire)\ncy.contains(\"button\", \"Import Excel\").should(\"be.visible\").click({\n  force: true\n});\n// Attendre que la requête API soit complétée\ncy.wait(\"@importStudents\");\n// Vérifier le message de succès dans la modal SweetAlert2\ncy.get(\".swal2-popup\", {\n  timeout: 10000\n}).should(\"be.visible\");\ncy.get(\".swal2-title\").should(\"contain\", \"Success\");\ncy.get(\".swal2-html-container\").should(\"contain\", \"Students imported successfully!\");",
              "err": {},
              "uuid": "8a8d93d6-44e4-48ae-9b46-9408c827cd6b",
              "parentUUID": "70b47049-0ac9-4087-ae26-72221b37fb30",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "L'utilisateur peut rechercher un étudiant",
              "fullTitle": "Import Excel Étudiant L'utilisateur peut rechercher un étudiant",
              "timedOut": null,
              "duration": 29061,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Mock de la liste d'étudiants\nconst mockStudents = [{\n  _id: \"1\",\n  firstName: \"John\",\n  lastName: \"Doe\",\n  email: \"john.doe@example.com\",\n  level: \"3year\"\n}, {\n  _id: \"2\",\n  firstName: \"Jane\",\n  lastName: \"Smith\",\n  email: \"jane.smith@example.com\",\n  level: \"2year\"\n}, {\n  _id: \"3\",\n  firstName: \"Bob\",\n  lastName: \"Johnson\",\n  email: \"bob.johnson@example.com\",\n  level: \"3year\"\n}];\n// Intercepter la requête GET pour récupérer les étudiants\n// La réponse doit avoir un format { model: [...] } selon le code\ncy.intercept(\"GET\", \"**/api/students/**\", {\n  statusCode: 200,\n  body: {\n    model: mockStudents\n  }\n}).as(\"getStudents\");\n// Se connecter en tant qu'admin\ncy.forceLogin();\n// Naviguer vers la page de gestion des étudiants\ncy.visit(\"/managestudents\");\n// Attendre que la page soit chargée et que les étudiants soient récupérés\ncy.wait(\"@getStudents\");\ncy.contains(\"List of Students\").should(\"be.visible\");\n// Attendre que le tableau soit rendu avec les données\ncy.get(\"table\", {\n  timeout: 5000\n}).should(\"be.visible\");\n// Vérifier que tous les étudiants sont affichés initialement\ncy.contains(\"John\", {\n  timeout: 5000\n}).should(\"be.visible\");\ncy.contains(\"Doe\").should(\"be.visible\");\ncy.contains(\"Jane\").should(\"be.visible\");\ncy.contains(\"Smith\").should(\"be.visible\");\ncy.contains(\"Bob\").should(\"be.visible\");\ncy.contains(\"Johnson\").should(\"be.visible\");\n// Rechercher un étudiant par nom\ncy.get('input[placeholder=\"Search...\"]').should(\"be.visible\").type(\"John\");\n// Vérifier que seuls les étudiants correspondants sont affichés\n// John Doe et Bob Johnson contiennent \"John\"\ncy.contains(\"John\").should(\"be.visible\");\ncy.contains(\"Doe\").should(\"be.visible\");\ncy.contains(\"Bob\").should(\"be.visible\");\ncy.contains(\"Johnson\").should(\"be.visible\");\n// Jane Smith ne devrait pas être visible\ncy.contains(\"Jane\").should(\"not.exist\");\ncy.contains(\"Smith\").should(\"not.exist\");\n// Effacer la recherche\ncy.get('input[placeholder=\"Search...\"]').clear();\n// Vérifier que tous les étudiants sont à nouveau affichés\ncy.contains(\"John\").should(\"be.visible\");\ncy.contains(\"Jane\").should(\"be.visible\");\ncy.contains(\"Bob\").should(\"be.visible\");\n// Rechercher par email\ncy.get('input[placeholder=\"Search...\"]').type(\"jane.smith\");\n// Vérifier que seul Jane Smith est affiché\ncy.contains(\"Jane\").should(\"be.visible\");\ncy.contains(\"Smith\").should(\"be.visible\");\ncy.contains(\"John\").should(\"not.exist\");\ncy.contains(\"Doe\").should(\"not.exist\");\ncy.contains(\"Bob\").should(\"not.exist\");\ncy.contains(\"Johnson\").should(\"not.exist\");",
              "err": {
                "message": "AssertionError: Timed out retrying after 10000ms: Expected not to find content: 'Jane' but continuously found it.",
                "estack": "AssertionError: Timed out retrying after 10000ms: Expected not to find content: 'Jane' but continuously found it.\n    at Context.eval (webpack://react-project/./cypress/e2e/admin-students.cy.js:149:24)",
                "diff": null
              },
              "uuid": "9aa7a86a-a466-4fbe-80ff-7d97fa51f894",
              "parentUUID": "70b47049-0ac9-4087-ae26-72221b37fb30",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "8a8d93d6-44e4-48ae-9b46-9408c827cd6b"
          ],
          "failures": [
            "9aa7a86a-a466-4fbe-80ff-7d97fa51f894"
          ],
          "pending": [],
          "skipped": [],
          "duration": 44339,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.2.0"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": null,
      "version": "6.3.2"
    }
  }
}