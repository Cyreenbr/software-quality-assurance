<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:2,&quot;passes&quot;:1,&quot;pending&quot;:0,&quot;failures&quot;:1,&quot;start&quot;:&quot;2025-12-06T19:05:36.578Z&quot;,&quot;end&quot;:&quot;2025-12-06T19:06:21.364Z&quot;,&quot;duration&quot;:44786,&quot;testsRegistered&quot;:2,&quot;passPercent&quot;:50,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;4e4f9a0e-50dc-4b2b-ab69-cf68cff001dd&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress\\e2e\\admin-students.cy.js&quot;,&quot;file&quot;:&quot;cypress\\e2e\\admin-students.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;70b47049-0ac9-4087-ae26-72221b37fb30&quot;,&quot;title&quot;:&quot;Import Excel Étudiant&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;L&#x27;utilisateur peut importer un fichier Excel&quot;,&quot;fullTitle&quot;:&quot;Import Excel Étudiant L&#x27;utilisateur peut importer un fichier Excel&quot;,&quot;duration&quot;:15278,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Intercepter la requête API d&#x27;import\ncy.intercept(\&quot;POST\&quot;, \&quot;**/api/students/upload\&quot;, {\n  statusCode: 200,\n  body: {\n    message: \&quot;Students imported successfully\&quot;\n  }\n}).as(\&quot;importStudents\&quot;);\n// Se connecter en tant qu&#x27;admin AVANT toute navigation\ncy.forceLogin();\n// Naviguer vers la page de gestion des étudiants\ncy.visit(\&quot;/managestudents\&quot;);\n// Attendre que la page soit chargée\ncy.contains(/students/i).should(\&quot;be.visible\&quot;);\n// Cliquer sur le bouton + pour ouvrir le formulaire d&#x27;import\n// Le bouton est dans le même conteneur que \&quot;List of Students\&quot;\ncy.contains(\&quot;List of Students\&quot;).parent().find(\&quot;button[class*=&#x27;bg-gray-400&#x27;]\&quot;).should(\&quot;be.visible\&quot;).click();\n// Attendre que le formulaire d&#x27;import soit visible\ncy.contains(\&quot;Excel Import of Students\&quot;).should(\&quot;be.visible\&quot;);\n// S&#x27;assurer qu&#x27;aucune modal n&#x27;est ouverte avant de commencer\ncy.get(\&quot;body\&quot;).then($body =&gt; {\n  const modalExists = $body.find(\&quot;.swal2-popup\&quot;).length &gt; 0;\n  if (modalExists) {\n    cy.get(\&quot;.swal2-confirm, .swal2-cancel, .swal2-close\&quot;).first().click({\n      force: true\n    });\n    cy.wait(500);\n  }\n});\n// Sélectionner le fichier Excel\ncy.get(\&quot;input[type=&#x27;file&#x27;]\&quot;).should(\&quot;be.visible\&quot;).selectFile(\&quot;cypress/fixtures/students_import.xlsx\&quot;, {\n  force: true\n});\n// Attendre que le fichier soit traité\ncy.wait(1500); // Donner le temps au FileReader de traiter le fichier\n// Vérifier et fermer toute modal d&#x27;erreur qui pourrait être apparue\ncy.get(\&quot;body\&quot;).then($body =&gt; {\n  const errorModal = $body.find(\&quot;.swal2-popup.swal2-icon-error\&quot;);\n  if (errorModal.length &gt; 0) {\n    // Fermer la modal d&#x27;erreur et continuer\n    cy.get(\&quot;.swal2-confirm, .swal2-cancel, .swal2-close\&quot;).first().click({\n      force: true\n    });\n    cy.wait(500);\n    // Si une erreur est survenue, on ne peut pas continuer\n    cy.log(\&quot;Une erreur est survenue lors de la lecture du fichier\&quot;);\n    return;\n  }\n});\n// Le tableau peut ne pas être visible si le fichier est vide ou invalide\n// On vérifie simplement que le bouton Import est disponible\ncy.contains(\&quot;button\&quot;, \&quot;Import Excel\&quot;).should(\&quot;be.visible\&quot;);\n// Cliquer sur le bouton Import Excel (forcer le clic si nécessaire)\ncy.contains(\&quot;button\&quot;, \&quot;Import Excel\&quot;).should(\&quot;be.visible\&quot;).click({\n  force: true\n});\n// Attendre que la requête API soit complétée\ncy.wait(\&quot;@importStudents\&quot;);\n// Vérifier le message de succès dans la modal SweetAlert2\ncy.get(\&quot;.swal2-popup\&quot;, {\n  timeout: 10000\n}).should(\&quot;be.visible\&quot;);\ncy.get(\&quot;.swal2-title\&quot;).should(\&quot;contain\&quot;, \&quot;Success\&quot;);\ncy.get(\&quot;.swal2-html-container\&quot;).should(\&quot;contain\&quot;, \&quot;Students imported successfully!\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a8d93d6-44e4-48ae-9b46-9408c827cd6b&quot;,&quot;parentUUID&quot;:&quot;70b47049-0ac9-4087-ae26-72221b37fb30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;L&#x27;utilisateur peut rechercher un étudiant&quot;,&quot;fullTitle&quot;:&quot;Import Excel Étudiant L&#x27;utilisateur peut rechercher un étudiant&quot;,&quot;duration&quot;:29061,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Mock de la liste d&#x27;étudiants\nconst mockStudents = [{\n  _id: \&quot;1\&quot;,\n  firstName: \&quot;John\&quot;,\n  lastName: \&quot;Doe\&quot;,\n  email: \&quot;john.doe@example.com\&quot;,\n  level: \&quot;3year\&quot;\n}, {\n  _id: \&quot;2\&quot;,\n  firstName: \&quot;Jane\&quot;,\n  lastName: \&quot;Smith\&quot;,\n  email: \&quot;jane.smith@example.com\&quot;,\n  level: \&quot;2year\&quot;\n}, {\n  _id: \&quot;3\&quot;,\n  firstName: \&quot;Bob\&quot;,\n  lastName: \&quot;Johnson\&quot;,\n  email: \&quot;bob.johnson@example.com\&quot;,\n  level: \&quot;3year\&quot;\n}];\n// Intercepter la requête GET pour récupérer les étudiants\n// La réponse doit avoir un format { model: [...] } selon le code\ncy.intercept(\&quot;GET\&quot;, \&quot;**/api/students/**\&quot;, {\n  statusCode: 200,\n  body: {\n    model: mockStudents\n  }\n}).as(\&quot;getStudents\&quot;);\n// Se connecter en tant qu&#x27;admin\ncy.forceLogin();\n// Naviguer vers la page de gestion des étudiants\ncy.visit(\&quot;/managestudents\&quot;);\n// Attendre que la page soit chargée et que les étudiants soient récupérés\ncy.wait(\&quot;@getStudents\&quot;);\ncy.contains(\&quot;List of Students\&quot;).should(\&quot;be.visible\&quot;);\n// Attendre que le tableau soit rendu avec les données\ncy.get(\&quot;table\&quot;, {\n  timeout: 5000\n}).should(\&quot;be.visible\&quot;);\n// Vérifier que tous les étudiants sont affichés initialement\ncy.contains(\&quot;John\&quot;, {\n  timeout: 5000\n}).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Doe\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Jane\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Smith\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Bob\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Johnson\&quot;).should(\&quot;be.visible\&quot;);\n// Rechercher un étudiant par nom\ncy.get(&#x27;input[placeholder=\&quot;Search...\&quot;]&#x27;).should(\&quot;be.visible\&quot;).type(\&quot;John\&quot;);\n// Vérifier que seuls les étudiants correspondants sont affichés\n// John Doe et Bob Johnson contiennent \&quot;John\&quot;\ncy.contains(\&quot;John\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Doe\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Bob\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Johnson\&quot;).should(\&quot;be.visible\&quot;);\n// Jane Smith ne devrait pas être visible\ncy.contains(\&quot;Jane\&quot;).should(\&quot;not.exist\&quot;);\ncy.contains(\&quot;Smith\&quot;).should(\&quot;not.exist\&quot;);\n// Effacer la recherche\ncy.get(&#x27;input[placeholder=\&quot;Search...\&quot;]&#x27;).clear();\n// Vérifier que tous les étudiants sont à nouveau affichés\ncy.contains(\&quot;John\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Jane\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Bob\&quot;).should(\&quot;be.visible\&quot;);\n// Rechercher par email\ncy.get(&#x27;input[placeholder=\&quot;Search...\&quot;]&#x27;).type(\&quot;jane.smith\&quot;);\n// Vérifier que seul Jane Smith est affiché\ncy.contains(\&quot;Jane\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;Smith\&quot;).should(\&quot;be.visible\&quot;);\ncy.contains(\&quot;John\&quot;).should(\&quot;not.exist\&quot;);\ncy.contains(\&quot;Doe\&quot;).should(\&quot;not.exist\&quot;);\ncy.contains(\&quot;Bob\&quot;).should(\&quot;not.exist\&quot;);\ncy.contains(\&quot;Johnson\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 10000ms: Expected not to find content: &#x27;Jane&#x27; but continuously found it.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 10000ms: Expected not to find content: &#x27;Jane&#x27; but continuously found it.\n    at Context.eval (webpack://react-project/./cypress/e2e/admin-students.cy.js:149:24)&quot;},&quot;uuid&quot;:&quot;9aa7a86a-a466-4fbe-80ff-7d97fa51f894&quot;,&quot;parentUUID&quot;:&quot;70b47049-0ac9-4087-ae26-72221b37fb30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a8d93d6-44e4-48ae-9b46-9408c827cd6b&quot;],&quot;failures&quot;:[&quot;9aa7a86a-a466-4fbe-80ff-7d97fa51f894&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:44339,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.4&quot;},&quot;marge&quot;:{&quot;options&quot;:null,&quot;version&quot;:&quot;6.3.2&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;React-Project&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\User\\projects\\QL\\React-Project\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\User\\projects\\QL\\React-Project\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>